Source code for lesson available here: http://ideone.com/MHm7CG